(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{21:function(e,t,n){"use strict";n.r(t);var o=n(20),a=n(12),s=(n(25),n(7),n(18)),i=n(32),c=n(2),r=n(14),l=n(16);const u="#JSGF V1.0; grammar colors; public <color> = "+["aqua","azure","beige","bisque","black","blue","brown","chocolate","coral","crimson","cyan","fuchsia","ghostwhite","gold","goldenrod","gray","green","indigo","ivory","khaki","lavender","lime","linen","magenta","maroon","moccasin","navy","olive","orange","orchid","peru","pink","plum","purple","red","salmon","sienna","silver","snow","tan","teal","thistle","tomato","turquoise","violet","white","yellow"].join(" | ")+" ;",p=new webkitSpeechGrammarList;p.addFromString(u,1);const g=p,d=Object(i.a)({id:"machine",type:"parallel",states:{dm:{initial:"init",states:{init:{on:{CLICK:"askColour"}},askColour:{entry:Object(c.k)("LISTEN"),on:{ASR_onResult:"repaint"}},repaint:{entry:[Object(c.k)("SPEAK"),"repaint"],on:{CLICK:"askColour"}}}},asr:{initial:"idle",states:{idle:{on:{LISTEN:"recognising"}},recognising:{entry:"recStart",on:{ASR_onResult:{actions:[Object(c.b)({recResult:(e,t)=>t.recResult}),"recLogResult"],target:"nlu"}},exit:"recStop"},nlu:{invoke:{id:"getNLU",src:e=>b(e.recResult),onDone:{target:"idle",actions:[Object(c.b)({nluData:(e,t)=>t.data}),"logIntent"]},onError:{target:"idle",actions:["nluSaveResult"]}}}}},tts:{initial:"idle",states:{idle:{on:{SPEAK:"speaking"}},speaking:{entry:"speak",on:{TTS_onEnd:"idle"}}}}}},{actions:{recLogResult:e=>{console.log("<< ASR: "+e.recResult)},test:()=>{console.log("test")},logIntent:e=>{console.log("<< NLU intent: "+e.nluData.intent.name)}}});function m(){const e=Object(l.useSpeechSynthesis)({onEnd:()=>{p("TTS_onEnd")}}).speak,t=Object(l.useSpeechRecognition)({onResult:e=>{p({type:"ASR_onResult",recResult:e})}}),n=t.listen,s=(t.listening,t.stop),i=Object(r.b)(d,{actions:{recStart:Object(r.a)((()=>{console.log("Ready to receive a color command."),n({interimResults:!1,continuous:!1,grammars:g})})),recStop:Object(r.a)((()=>{console.log("Recognition stopped."),s()})),repaint:Object(r.a)((e=>{console.log("Repainting..."),document.body.style.background=e.recResult})),speak:Object(r.a)((t=>{console.log("Speaking..."),e({text:"I heard "+t.recResult})}))}}),c=Object(o.a)(i,2),u=c[0],p=c[1],m=u.matches({asr:"recognising"});return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("button",{type:"button",className:"glow-on-hover",onClick:()=>p("CLICK"),style:m?{animation:"glowing 20s linear"}:{},children:m?"Listening...":"Click to talk"})})}const b=e=>fetch(new Request("https://cors-anywhere.herokuapp.com/https://rasa-nlu-api-00.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://maraev.me"},body:'{"text": "'.concat(e,'"}')})).then((e=>e.json())),h=document.getElementById("root");s.render(Object(a.jsx)(m,{}),h)},25:function(e,t,n){}},[[21,1,2]]]);
//# sourceMappingURL=main.444d722b.chunk.js.map